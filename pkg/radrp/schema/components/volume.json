{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "definitions": {
    "VolumeResource": {
      "description": "The Volume provides an abstraction for a volume that can be mounted to a container",
      "type": "object",
      "x-ms-azure-resource": true,
      "required": [
        "properties"
      ],
      "allOf": [
        {
          "$ref": "../common-types.json#/definitions/ProxyResource"
        }
      ],
      "properties": {
        "properties": {
          "$ref": "#/definitions/VolumeProperties"
        }
      }
    },
    "VolumeProperties": {
      "type": "object",
      "allOf": [
        {
          "$ref": "basic-component.json#/definitions/BasicComponentProperties"
        }
      ],
      "oneOf": [
        {
          "$ref": "#/definitions/AzureFileShareVolumeProperties"
        },
        {
          "$ref": "#/definitions/AzureKeyVaultVolumeProperties"
        }
      ]
    },
    "AzureFileShareVolumeProperties": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "kind"
      ],
      "properties": {
        "managed": {
          "description": "Indicates if the resource is Radius-managed. If false, a Resource must be specified",
          "type": "boolean"
        },
        "kind": {
          "description": "The kind of volume component",
          "type": "string",
          "enum": ["azure.com.fileshare"]
        },
        "resource": {
          "description": "The ID of the user-managed volume to use for this component",
          "type": "string"
        }
      }
    },
    "AzureKeyVaultVolumeProperties": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "kind"
      ],
      "properties": {
        "managed": {
          "description": "Indicates if the resource is Radius-managed. If false, a Resource must be specified",
          "type": "boolean"
        },
        "kind": {
          "description": "The kind of volume component",
          "type": "string",
          "enum": ["azure.com.keyvault"]
        },
        "resource": {
          "description": "The ID of the user-managed keyvault to use for this volume component",
          "type": "string"
        },
        "secrets": {
          "type": "object",
          "description": "The KeyVault secrets that this volume exposes",
          "additionalProperties": {
            "$ref": "#/definitions/SecretObjectProperties"
          }
        },
        "certificates": {
          "description": "The KeyVault certificates that this volume exposes",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/CertificateObjectProperties"
          }
        },
        "keys": {
          "description": "The KeyVault keys that this volume exposes",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/KeyObjectProperties"
          }
        }
      }
    },
    "SecretObjectProperties": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "description": "The name of the secret",
          "type": "string"
        },
        "version": {
          "description": "Secret version",
          "type": "string"
        },
        "encoding": {
          "description": "Encoding format. Default utf-8",
          "type": "string",
          "default": "utf-8",
          "enum": [
            "utf-8",
            "hex",
            "base64"
          ]
        }
      }
    },
    "CertificateObjectProperties": {
      "type": "object",
      "required": [
        "name",
        "value"
      ],
      "properties": {
        "name": {
          "description": "The name of the certificate",
          "type": "string"
        },
        "version": {
          "description": "Certificate version",
          "type": "string"
        },
        "value": {
          "description": "Certificate object to be downloaded - the certificate itself, private key or public key of the certificate",
          "type": "string",
          "enum": [
            "certificate",
            "publickey",
            "privatekey"
          ]
        },
        "encoding": {
          "description": "Encoding format. Default utf-8",
          "type": "string",
          "default": "utf-8",
          "enum": [
            "utf-8",
            "hex",
            "base64"
          ]
        },
        "format": {
          "description": "Certificate format. Default pem",
          "type": "string",
          "default": "pem",
          "enum": [
            "pem",
            "pfx"
          ]
        }
      }
    },
    "KeyObjectProperties": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "description": "The name of the key",
          "type": "string"
        },
        "version": {
          "description": "Key version",
          "type": "string"
        }
      }
    }
  }
}
    
