name: "Install Git HTTP Backend"
description: "Installs a git HTTP backend, configures basic auth, and exposes it inside the cluster using alpine/git."
inputs:
  git-username:
    description: "Username for basic authentication"
    required: true
  git-password:
    description: "Password for basic authentication"
    required: true
  namespace:
    description: "Namespace to deploy the githttpbackend into"
    required: false
    default: "githttpbackend"
  image:
    description: "Container image to use for the git backend"
    required: false
    default: "alpine/git:2.45.2"
runs:
  using: "composite"
  steps:
    - name: Install githttpbackend
      shell: bash
      run: hack/flux-tests/install-git-http-backend.sh "${{ inputs.git-username }}" "${{ inputs.git-password }}" "${{ inputs.namespace }}" "${{ inputs.image }}"
