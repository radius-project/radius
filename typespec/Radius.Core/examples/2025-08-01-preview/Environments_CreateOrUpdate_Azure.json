{
  "operationId": "Environments_CreateOrUpdate",
  "title": "Create or Update an environment with Azure provider and identity",
  "parameters": {
    "rootScope": "/planes/radius/local/resourceGroups/testGroup",
    "environmentName": "my-aci-env",
    "api-version": "2025-08-01-preview",
    "EnvironmentResource": {
      "location": "West US",
      "properties": {
        "recipePacks": [
          "/planes/radius/local/providers/Radius.Core/recipePacks/azure-aci-pack"
        ],
        "recipeParameters": {
          "Radius.Compute/containers": {
            "allowPlatformOptions": false
          },
          "Radius.Data/sqlDatabases": {
            "sku": "Basic"
          }
        },
        "providers": {
          "azure": {
            "subscriptionId": "00000000-0000-0000-0000-000000000000",
            "resourceGroupName": "my-resource-group",
            "identity": {
              "kind": "userAssigned",
              "managedIdentity": [
                "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/my-identity"
              ]
            }
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/planes/radius/local/resourceGroups/testGroup/providers/Radius.Core/environments/my-aci-env",
        "name": "my-aci-env",
        "type": "Radius.Core/environments",
        "properties": {
          "provisioningState": "Succeeded",
          "recipePacks": [
            "/planes/radius/local/providers/Radius.Core/recipePacks/azure-aci-pack"
          ],
          "recipeParameters": {
            "Radius.Compute/containers": {
              "allowPlatformOptions": false
            },
            "Radius.Data/sqlDatabases": {
              "sku": "Basic"
            }
          },
          "providers": {
            "azure": {
              "subscriptionId": "00000000-0000-0000-0000-000000000000",
              "resourceGroupName": "my-resource-group",
              "identity": {
                "kind": "userAssigned",
                "managedIdentity": [
                  "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/my-identity"
                ]
              }
            }
          }
        }
      }
    }
  }
}
